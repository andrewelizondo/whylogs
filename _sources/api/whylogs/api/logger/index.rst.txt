:py:mod:`whylogs.api.logger`
============================

.. py:module:: whylogs.api.logger


Submodules
----------
.. toctree::
   :titlesonly:
   :maxdepth: 1

   logger/index.rst
   result_set/index.rst
   rolling/index.rst
   transient/index.rst


Package Contents
----------------

Classes
~~~~~~~

.. autoapisummary::

   whylogs.api.logger.Logger
   whylogs.api.logger.ResultSet
   whylogs.api.logger.TimedRollingLogger
   whylogs.api.logger.TransientLogger
   whylogs.api.logger.DatasetProfile
   whylogs.api.logger.DatasetSchema



Functions
~~~~~~~~~

.. autoapisummary::

   whylogs.api.logger.log
   whylogs.api.logger.read
   whylogs.api.logger.write
   whylogs.api.logger.logger



.. py:class:: Logger(schema: Optional[whylogs.core.DatasetSchema] = None)

   Bases: :py:obj:`abc.ABC`

   Helper class that provides a standard way to create an ABC using
   inheritance.

   .. py:method:: check_writer(self, _: whylogs.api.writer.Writer) -> None

      Checks if a writer is configured correctly for this class


   .. py:method:: append_writer(self, name: Optional[str] = None, *, writer: Optional[whylogs.api.writer.Writer] = None, **kwargs: Any) -> None


   .. py:method:: log(self, obj: Any = None, *, pandas: Optional[whylogs.core.stubs.pd.DataFrame] = None, row: Optional[Dict[str, Any]] = None) -> whylogs.api.logger.result_set.ResultSet


   .. py:method:: close(self) -> None
      :abstractmethod:



.. py:class:: ResultSet

   Bases: :py:obj:`abc.ABC`

   A holder object for profiling results.

   A whylogs.log call can result in more than one profile. This wrapper class
   simplifies the navigation among these profiles.

   Note that currently we only hold one profile but we're planning to add other
   kinds of profiles such as segmented profiles here.

   .. py:method:: read(cls, multi_profile_file: str) -> ResultSet
      :classmethod:


   .. py:method:: writer(self, name: str = 'local') -> ResultSetWriter


   .. py:method:: view(self) -> whylogs.core.DatasetProfileView
      :abstractmethod:


   .. py:method:: profile(self) -> whylogs.core.DatasetProfile
      :abstractmethod:



.. py:class:: TimedRollingLogger(schema: Optional[whylogs.core.DatasetSchema] = None, *, base_name: Optional[str] = None, file_extension: Optional[str] = None, interval: int = 1, when: typing_extensions.Literal[S, M, H, D] = 'H', utc: bool = False, aligned: bool = True, fork: bool = False, skip_empty: bool = False, callback: Optional[Callable[[whylogs.api.writer.Writer, whylogs.core.DatasetProfileView, str], None]] = None)

   Bases: :py:obj:`whylogs.api.logger.logger.Logger`

   A rolling logger that continuously rotates files based on time.

   .. py:method:: check_writer(self, writer: whylogs.api.writer.Writer) -> None

      Checks if a writer is configured correctly for this class


   .. py:method:: close(self) -> None


   .. py:method:: append_writer(self, name: Optional[str] = None, *, writer: Optional[whylogs.api.writer.Writer] = None, **kwargs: Any) -> None


   .. py:method:: log(self, obj: Any = None, *, pandas: Optional[whylogs.core.stubs.pd.DataFrame] = None, row: Optional[Dict[str, Any]] = None) -> whylogs.api.logger.result_set.ResultSet



.. py:class:: TransientLogger(schema: Optional[whylogs.core.DatasetSchema] = None)

   Bases: :py:obj:`whylogs.api.logger.logger.Logger`

   Helper class that provides a standard way to create an ABC using
   inheritance.

   .. py:method:: flush(self) -> None


   .. py:method:: close(self) -> None


   .. py:method:: check_writer(self, _: whylogs.api.writer.Writer) -> None

      Checks if a writer is configured correctly for this class


   .. py:method:: append_writer(self, name: Optional[str] = None, *, writer: Optional[whylogs.api.writer.Writer] = None, **kwargs: Any) -> None


   .. py:method:: log(self, obj: Any = None, *, pandas: Optional[whylogs.core.stubs.pd.DataFrame] = None, row: Optional[Dict[str, Any]] = None) -> whylogs.api.logger.result_set.ResultSet



.. py:class:: DatasetProfile(schema: Optional[whylogs.core.schema.DatasetSchema] = None, dataset_timestamp: Optional[datetime.datetime] = None, creation_timestamp: Optional[datetime.datetime] = None)

   Bases: :py:obj:`whylogs.api.writer.writer.Writable`

   Dataset profile represents a collection of in-memory profiling stats for a dataset.

   :param schema: :class:`DatasetSchema`, optional
                  An object that represents the data column names and types
   :param dataset_timestamp: int, optional
                             A timestamp integer that best represents the date tied to the dataset generation.
                             i.e.: A January 1st 2019 Sales Dataset will have 1546300800000 as the timestamp in miliseconds (UTC).
                             If None is provided, it will take the current timestamp as default
   :param creation_timestamp: int, optional
                              The timestamp tied to the exact moment when the :class:`DatasetProfile` is created.
                              If None is provided, it will take the current timestamp as default

   .. py:method:: creation_timestamp(self) -> datetime.datetime
      :property:


   .. py:method:: dataset_timestamp(self) -> datetime.datetime
      :property:


   .. py:method:: is_active(self) -> bool
      :property:

      Returns True if the profile tracking code is currently running.


   .. py:method:: is_empty(self) -> bool
      :property:

      Returns True if the profile tracking code is currently running.


   .. py:method:: set_dataset_timestamp(self, dataset_timestamp: datetime.datetime) -> None


   .. py:method:: add_metric(self, col_name: str, metric: whylogs.core.metrics.Metric) -> None


   .. py:method:: track(self, obj: Any = None, *, pandas: Optional[whylogs.core.stubs.pd.DataFrame] = None, row: Optional[Mapping[str, Any]] = None) -> None


   .. py:method:: view(self) -> whylogs.core.view.DatasetProfileView


   .. py:method:: flush(self) -> None


   .. py:method:: get_default_path(path) -> str
      :staticmethod:


   .. py:method:: write(self, path: Optional[str] = None, **kwargs: Any) -> None


   .. py:method:: read(cls, input_path: str) -> whylogs.core.view.DatasetProfileView
      :classmethod:



.. py:class:: DatasetSchema

   Defines the schema for tracking metrics in whylogs.

   In order to customize your tracking, you can extend this class to specify your own column schema
   or your own type resolution. Otherwise, you can just use the default DatasetSchema object.

   Schema objects are also used to group datasets together.

   .. attribute:: types

      required. a dictionay of column name to the Python type.

   .. attribute:: default_configs

      optional. Options to configure various behavior of whylogs.

   .. attribute:: type_mapper

      Optional. a mapper that transates the Python type to standardized whylogs :class:`DataType` object.

   .. attribute:: resolvers

      Optional. an object that defines how to map from a column name, a whylogs :class:`DataType` and a
      schema to metrics.

   .. rubric:: Examples

   >>> import pandas as pd
   >>> import numpy as np
   >>> from whylogs.core import DatasetSchema, DatasetProfile
   >>>
   >>> class MySchema(DatasetSchema):
   ...    types = {
   ...        "col1": str,
   ...        "col2": np.int32,
   ...        "col3": pd.Categorical(categories=('foo', 'bar'), ordered=True)
   ...    }
   ...    cache_size = 12
   >>> schema = MySchema()
   >>> prof = DatasetProfile(MySchema())
   >>> df = pd.DataFrame({"col1": ['foo'], "col2": np.array([1], dtype=np.int32), "col3": ['bar']})
   >>> prof.track(pandas=df)

   .. py:attribute:: types
      :annotation: :Dict[str, Any]

      

   .. py:attribute:: default_configs
      :annotation: :whylogs.core.metrics.metrics.MetricConfig

      

   .. py:attribute:: type_mapper
      :annotation: :whylogs.core.datatypes.TypeMapper

      

   .. py:attribute:: resolvers
      :annotation: :whylogs.core.resolvers.Resolver

      

   .. py:attribute:: cache_size
      :annotation: :int = 1024

      

   .. py:attribute:: schema_based_automerge
      :annotation: :bool = False

      

   .. py:method:: copy(self) -> DatasetSchema

      Returns a new instance of the same underlying schema


   .. py:method:: resolve(self, *, pandas: Optional[whylogs.core.stubs.pd.DataFrame] = None, row: Optional[Mapping[str, Any]] = None) -> bool


   .. py:method:: get_col_names(self) -> tuple


   .. py:method:: get(self, name: str) -> Optional[ColumnSchema]



.. py:function:: log(obj: Any = None, *, pandas: Optional[whylogs.core.stubs.pd.DataFrame] = None, row: Optional[Dict[str, Any]] = None, schema: Optional[whylogs.core.DatasetSchema] = None) -> result_set.ResultSet


.. py:function:: read(path: str) -> result_set.ResultSet


.. py:function:: write(profile: whylogs.core.DatasetProfile, base_dir: str) -> None


.. py:function:: logger(schema: Optional[whylogs.core.DatasetSchema] = None, *, mode: typing_extensions.Literal[transient, rolling] = 'transient', **kwargs: Any) -> logger.Logger

   :returns: a logger object
   :rtype: Logger


